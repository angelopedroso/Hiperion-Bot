// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

// Arquivo: schema.prisma
// participante:
// {"id":string,"tipo":string}

// grupo:
// {"id":string,"participantes": array de id de participantes,"bemvindo":boolean,"antilink": boolean, "antitrava":objeto com status: boolean e max_characters: int,"antiflood":boolean,"antiporno":boolean,"lista_negra":array de participantes}

model Participant {
  id                     String                 @id @default(uuid())
  p_id                   String                 @unique
  group_participant      Group[]                @relation("participants_group")
  group_black_list       Group[]                @relation("participant_black_list")
  participant_group_type ParticipantGroupType[]
}

model ParticipantGroupType {
  id            String           @id @default(uuid())
  tipo          ParticipantType?
  group         Group            @relation(fields: [groupId], references: [id])
  groupId       String
  participant   Participant      @relation(fields: [participantId], references: [id])
  participantId String
}

model Group {
  id                     String                 @id @default(uuid())
  g_id                   String                 @unique
  participants           Participant[]          @relation("participants_group")
  black_list             Participant[]          @relation("participant_black_list")
  bem_vindo              Boolean?               @default(false)
  one_group              Boolean?               @default(false)
  auto_invite_link       Boolean?               @default(false)
  auto_sticker           Boolean?               @default(false)
  anti_link              Boolean?               @default(false)
  anti_porn              Boolean?               @default(false)
  anti_trava             AntiTrava?             @relation(fields: [anti_trava_id], references: [id])
  anti_trava_id          String?                @unique
  participant_group_type ParticipantGroupType[]
}

model AntiTrava {
  id             String   @id @default(uuid())
  status         Boolean? @default(false)
  max_characters Int?     @default(1000)
  group          Group?
}

enum ParticipantType {
  admin
  membro
}
